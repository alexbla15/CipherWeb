@inherits CipherFormRow

@inject ICipherInfo _db

<CipherFormRow Icon="@Icon">
    <RadzenDropDownDataGrid Placeholder="@Label" SearchTextPlaceholder="חיפוש..." TValue="string" Disabled="@Disabled"
                            Data=@subCategories TextProperty="@TextProperty" ValueProperty="@ValueProperty"
                            AllowColumnResize="true" AllowFilteringByAllStringColumns="true" Style="@($"width: {Width}")">
        <Columns>
            <RadzenDropDownDataGridColumn Property="Id" Title="#" Width="@($"{ColumnWidth}px")" />
            <RadzenDropDownDataGridColumn Property="MaterialType" Title="סוג החומר" Width="@($"{2*ColumnWidth}px")" />
            <RadzenDropDownDataGridColumn Property="Name" Title="שם הקטגוריה" Width="@($"{2*ColumnWidth}px")" />
        </Columns>
    </RadzenDropDownDataGrid>
</CipherFormRow>

@code {
    /// <summary>
    /// Is the drop down disabled.
    /// </summary>
    [Parameter]
    public bool Disabled { get; set; } = false;

    /// <summary>
    /// Name of SubCategory property to be shown in the HMI
    /// </summary>
    [Parameter]
    public string TextProperty { get; set; } = "Name";

    /// <summary>
    /// Name of SubCategory property to be save in the backend
    /// </summary>
    [Parameter]
    public string ValueProperty { get; set; } = "Name";

    /// <summary>
    /// Width of a column in a selectable datagrid.
    /// </summary>
    [Parameter]
    public int ColumnWidth { get; set; } = 50;

    private List<Category> subCategories = new List<Category>();

    protected override async Task OnInitializedAsync()
    {
        Label ??= "קטגוריה";
        Icon ??= Icons.Symbols.Category;
    }
}
@inherits CipherFormRow

@inject ICipherInfo _db

<CipherFormRow Icon="@Icons.Cipher.Vessel">
    <RadzenDropDownDataGrid TValue=Vessel Data=@Vessel.All().Item1 TextProperty="@(nameof(ves.Id))" ValueProperty="@(nameof(ves.Id))" 
    Placeholder="@Label" SearchTextPlaceholder="חיפוש..."
                            AllowColumnResize="true" AllowFilteringByAllStringColumns="true" Style="@($"width: {Width}")" Disabled="@Disabled">
        <Columns>
            <RadzenDropDownDataGridColumn Property="@(nameof(ves.Id))" Title="@(ves.Translate(nameof(ves.Id)))" />
            <RadzenDropDownDataGridColumn Property="@(nameof(ves.Type))" Title="@(ves.Translate(nameof(ves.Type)))" />
            <RadzenDropDownDataGridColumn Property="@(nameof(ves.System))" Title="@(ves.Translate(nameof(ves.System)))">
                <Template>
                    @((context as Vessel).System.Id)
                </Template>
                </RadzenDropDownDataGridColumn>
        </Columns>
    </RadzenDropDownDataGrid>
</CipherFormRow>

@code {
    /// <summary>
    /// Is the drop down disabled.
    /// </summary>
    [Parameter]
    public bool Disabled { get; set; } = false;

    private Vessel ves = Vessel.Random();

    protected override async Task OnInitializedAsync()
    {
        Label ??= "כלי";
        Icon ??= Icons.Cipher.Vessel;
        Width ??= "300px";
    }
}
@inherits CipherComponentCard

<CipherComponentCard Title="פרטי הקטגוריה" ContentDisplay="flex" ContentJustify="flex-start" ContentFlexWrap="wrap">
    <CipherAutoComplete Label="@Category.Translate(nameof(CachedData.CategoryExample.Name))" Icon="@Icons.Symbols.Category" @ref=CatName />
    <CipherCategoryDropDown Label="@Category.Translate(nameof(CachedData.CategoryExample.Parent))" @ref=ParentCat />
    <CipherAutoComplete Label="@Category.Translate(nameof(CachedData.CategoryExample.Description))" Icon="@Icons.Symbols.Category" Multiline="true"
    @ref=CatDescription />
    <CipherMask @ref=CatMask />
    <CipherProcesses Icon="@Icons.Arrows.Squared.Input" Label="@Category.Translate(nameof(CachedData.CategoryExample.CreatingProcesses))" @ref=InProcs />
    <CipherProcesses Icon="@Icons.Arrows.Squared.Output" Label="@Category.Translate(nameof(CachedData.CategoryExample.ConsumingProcesses))" @ref=OutProcs/>
</CipherComponentCard>

@code {
    private CipherCategoryDropDown ParentCat = new();
    private CipherAutoComplete CatName = new();
    private CipherAutoComplete CatDescription = new();
    private CipherMask CatMask = new();
    private CipherProcesses InProcs = new();
    private CipherProcesses OutProcs = new();

    public CategoryRequest Value()
    {
        CategoryRequest cat = CategoryRequest.Empty();

        cat.ParentId = ParentCat.ChosenCategory?.Id;
        cat.Name = CatName.Check() ? CatName.Value : "";
        cat.Description = CatDescription.Check() ? CatDescription.Value : "";
        cat.CreatingProcesses = (InProcs.ChosenProcesses is null) ? new() : InProcs.ChosenProcesses.Select(x => x.Id).ToHashSet();
        cat.ConsumingProcesses = (OutProcs.ChosenProcesses is null) ? new() : OutProcs.ChosenProcesses.Select(x => x.Id).ToHashSet();

        string cat_mask = CatMask.GetValue();
        if (cat_mask != "")
        {
            cat.IdMask = new HashSet<string>() { cat_mask };
        }

        return cat;
    }
}
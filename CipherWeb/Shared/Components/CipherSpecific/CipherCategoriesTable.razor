@inject ICipherInfo _db

@inherits CipherTableCard

<CipherTableCard Title="@Title" Sharable="@Sharable" IsReport="@IsReport">
    <AdditionalButtons>
        <CipherNavButton Icon="@Icons.Symbols.Plus.AddCircleOutline" Path="@CipherNavLinks.AddCategory.Href" HelpText="הוספת קטגוריה" Variant="Variant.Outlined" />
    </AdditionalButtons>
    <ComponentContent>
        <CipherDataGrid Cipher_TItem="Category" DataSource="@subCategories"
                        GridFilterMode="@FilterMode" AllowFilter="@Filter" AllowGroup="@Group" />
    </ComponentContent>
</CipherTableCard>

@code {
    /// <summary>
    /// Filter mode of data grid. Must be a FilterMode-enum.
    /// Defaults to SimpleWithMenu.
    /// </summary>
    [Parameter]
    public FilterMode FilterMode { get; set; } = FilterMode.SimpleWithMenu;

    /// <summary>
    /// Allows/disabled filtering.
    /// </summary>
    [Parameter]
    public bool Filter { get; set; } = false;

    /// <summary>
    /// Allows/disables grouping.
    /// </summary>
    [Parameter]
    public bool Group { get; set; } = false;

    private List<Category> subCategories = new List<Category>();

    protected override async Task OnInitializedAsync()
    {
        Title ??= "סוגים";
    }
}
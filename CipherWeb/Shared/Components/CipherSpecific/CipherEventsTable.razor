@inject ICipherInfo _db

@inherits CipherTableCard

<CipherTableCard Title="@Title" DataSource="@events" Variant="@Variant" WithCard="@WithCard" WithButtons="@WithButtons">
    <ComponentContent>
        <CipherDataGrid Cipher_TItem="Event" DataSource="@events"
                        GridFilterMode="@FilterMode" AllowFilter="@AllowFilter" AllowGroup="@AllowGroup" />
    </ComponentContent>
</CipherTableCard>

@code {
    /// <summary>
    /// Filter mode of the datagrid. Must be a FilterMode-enum.
    /// </summary>
    [Parameter]
    public FilterMode FilterMode { get; set; } = FilterMode.SimpleWithMenu;

    /// <summary>
    /// Is the datagrid filterable.
    /// </summary>
    [Parameter]
    public bool AllowFilter { get; set; } = false;

    /// <summary>
    /// Is the datagrid groupable.
    /// </summary>
    [Parameter]
    public bool AllowGroup { get; set; } = false;

    private List<Event> events = new List<Event>();

    protected override async Task OnInitializedAsync()
    {
        events = await _db.GetEvents();

        Title = (Title is null) ? "דוח תנועות" : Title;
    }
}
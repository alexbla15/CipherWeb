@inherits CipherComponentCard

@inject ICipherInfo _db

@code {
    [Parameter]
    public Package pack { get; set; }

    string twiceColWidth = "100px";
    string colWidth = "50px";
    string halfColWidth = "25px";

    List<SubCategory> subCategories = new List<SubCategory>();
    List<Vessel> vessels = new List<Vessel>();

    protected override async Task OnInitializedAsync()
    {
        subCategories = await _db.GetSubCategories();
        vessels = await _db.GetVessels();
    }
}


<CipherComponentCard Title="@Title">
    <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Center" AlignItems="AlignItems.Start" Gap="10px">
    <CipherPackageId />

    @* -- MATERIAL -- *@

    <CipherAutoComplete Icon="@Icons.Material" @bind-Value="pack.Material" Label="בחרו סוג" Data="@TestedData.MaterialTypes" Style="width:100%" />

    @* -- SUB CATEGORY -- *@
    <CipherFormRow Icon="@Icons.Category">
        <RadzenDropDownDataGrid @bind-Value=@pack.SubCategory Placeholder="חיפוש קטגוריה" SearchTextPlaceholder="חיפוש..."
                            Style="width:300px" 
                                Data=@subCategories TextProperty="Name" ValueProperty="Name"
                                AllowColumnResize="true" AllowFilteringByAllStringColumns="true">
            <Columns>
                <RadzenDropDownDataGridColumn Property="Name" Title="משנית" Width="@twiceColWidth" />
                <RadzenDropDownDataGridColumn Property="MainCategory" Title="ראשית" Width="@twiceColWidth" />
                <RadzenDropDownDataGridColumn Property="Id" Title="מספר קטגוריה" Width="@colWidth" />
            </Columns>
        </RadzenDropDownDataGrid>
    </CipherFormRow>

    @* -- VESSEL -- *@
    <CipherFormRow Icon="@Icons.Vessel">
        <RadzenDropDownDataGrid @bind-Value=@pack.Vessel Data=@vessels TextProperty="Name" ValueProperty="Name" Placeholder="חיפוש כלי" SearchTextPlaceholder="חיפוש..."
                                AllowColumnResize="true" AllowFilteringByAllStringColumns="true" Style="width:300px">
            <Columns>
                <RadzenDropDownDataGridColumn Property="Name" Title="שם" Width="@colWidth" />
                <RadzenDropDownDataGridColumn Property="Id" Title="מספר" Width="@halfColWidth" />
            </Columns>
        </RadzenDropDownDataGrid>
    </CipherFormRow>
    </RadzenStack>
</CipherComponentCard>
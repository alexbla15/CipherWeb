@inherits CipherFormRow

<CipherFormRow Icon="@Icon">
    <RadzenDropDownDataGrid Placeholder="@Label" TValue="Category" AllowFiltering="true" Disabled="@Disabled" @bind-value="Value"
                            Style="width:300px" Data=@categories SearchTextPlaceholder="חיפוש...">
        <Columns>
            <RadzenDropDownDataGridColumn Property="@(nameof(CachedData.CategoryExample.Id))" Title="@(Category.Translate(nameof(CachedData.CategoryExample.Id)))" />
            <RadzenDropDownDataGridColumn Property="@(nameof(CachedData.CategoryExample.Name))" Title="@(Category.Translate(nameof(CachedData.CategoryExample.Name)))" />
            <RadzenDropDownDataGridColumn Property="@(nameof(CachedData.CategoryExample.Parent))" Title="@(Category.Translate(nameof(CachedData.CategoryExample.Parent)))">
                <Template>
                    @((context as Category).Parent?.Name)
                </Template>
            </RadzenDropDownDataGridColumn>
        </Columns>
        <ValueTemplate>
            <b>@Label:</b> @((context as Category).Name)
        </ValueTemplate>
    </RadzenDropDownDataGrid>
</CipherFormRow>

@code {
    /// <summary>
    /// Is component disabled?
    /// </summary>
    [Parameter]
    public bool Disabled { get; set; } = false;

    /// <summary>
    /// Chosen value
    /// </summary>
    [Parameter]
    public string? Value { get; set; }

    private ErrorResponse error = ErrorResponse.Success;
    private List<Category> categories = new List<Category>();

    protected override void OnInitialized()
    {
        Label ??= "סוג החומר";
        Icon ??= Icons.Cipher.Material;

        (categories, error) = CachedData.AllCategories;
    }
}
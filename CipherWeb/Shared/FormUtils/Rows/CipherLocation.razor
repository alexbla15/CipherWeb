@inject ICipherInfo _db

@inherits RadzenStack

<RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Start" AlignItems="AlignItems.Center" Gap="5px">
    <RadzenIcon Icon="@Icon" IconColor="@Colors.PrimaryDark" Style="font-size: xx-large;" />
    <RadzenDropDownDataGrid @bind-Value=@sys Data=@vessels TextProperty="Id" ValueProperty="Id" Placeholder="@Label" SearchTextPlaceholder="חיפוש..."
                            AllowColumnResize="true" AllowFilteringByAllStringColumns="true" Style="@($"width: {Width}")">
        <Columns>
            <RadzenDropDownDataGridColumn Property="Id" Title="שם" Width="50px" />
            <RadzenDropDownDataGridColumn Property="System" Title="מיקום" Width="50px" />
        </Columns>
    </RadzenDropDownDataGrid>
</RadzenStack>

@code {
    /// <summary>
    /// Value of the component.
    /// </summary>
    [Parameter]
    public string? sys { get; set; }

    /// <summary>
    /// Label and placeholder of component.
    /// </summary>
    [Parameter]
    public string? Label { get; set; }

    /// <summary>
    /// Icon aside the component.
    /// </summary>
    [Parameter]
    public string Icon { get; set; }

    /// <summary>
    /// Component's width.
    /// </summary>
    [Parameter]
    public string Width { get; set; } = "300px";

    private List<Vessel> vessels = new List<Vessel>();

    protected override async Task OnInitializedAsync()
    {
        vessels = await _db.GetVessels();

        Label ??= "מיקום"; 
        Icon ??= Icons.Location;
    }
}
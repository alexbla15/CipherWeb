@page "/Search/FreeSearch/"

@inject ICipherInfo _db
@inject DialogService DialogService

<PageTitle>חיפוש חופשי</PageTitle>

<CipherComponentCard Title="תוצאות חיפוש עבור" HeaderContentPaddingRight="10px">
    <HeaderContent>
        <CipherAutoComplete Data="@TestedData.Packages" TextProperty="Id" Value="111"></CipherAutoComplete>
    </HeaderContent>
    <ChildContent>
        <RadzenAccordion Style="background-color: var(--rz-primary-lightest);" Multiple="true">
            <Items>
                <RadzenAccordionItem Text="@($"תעודות ({TestedData.Packages.Count()})")">
                    <CipherComponentCard>
                        <CipherDataGrid DataSource="@TestedData.Packages" WithTotalFooter=false></CipherDataGrid>
                    </CipherComponentCard>
                </RadzenAccordionItem>
                <br />
                <RadzenAccordionItem Text="@($"כלים ({TestedData.Vessels.Count()})")">
                    <CipherComponentCard>
                        <CipherDataGrid DataSource="@TestedData.Vessels" WithTotalFooter=false></CipherDataGrid>
                    </CipherComponentCard>
                </RadzenAccordionItem>
                <RadzenAccordionItem Text="@($"מיקומים ({TestedData.Systems.Count()})")">
                    <CipherComponentCard>
                        <CipherDataGrid DataSource="@TestedData.Systems" WithTotalFooter=false></CipherDataGrid>
                    </CipherComponentCard>
                </RadzenAccordionItem>
            </Items>
        </RadzenAccordion>
    </ChildContent>
</CipherComponentCard>

@code {
    public async Task OpenPackage()
    {
        await DialogService.OpenAsync("תעודה",

        ds =>
    @<CipherPackageCard dir="rtl" WithCard=false ReadOnly=true></CipherPackageCard>, Constants.SetDialogOptions);
    }

    public async Task OpenVessel()
    {
        await DialogService.OpenAsync("כלי",

        ds =>
    @<CipherVesselCard dir="rtl" WithCard=false ReadOnly=true></CipherVesselCard>, Constants.SetDialogOptions);
    }

    public async Task OpenSystem()
    {
        await DialogService.OpenAsync("מיקום",

    ds =>
    @<CipherSystemCard dir="rtl" WithCard=false ReadOnly=true></CipherSystemCard>, Constants.SetDialogOptions);
    }

}

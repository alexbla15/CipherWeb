@page "/"
@namespace CipherWeb.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
}

<script src="~/site.js"></script>

<component type="typeof(App)" render-mode="ServerPrerendered" />

<script>
    window.DownloadFile = function (fileName, content) {
        // Create a blob from the content
        const blob = new Blob([content], { type: 'text/csv;charset=utf-8;' });

        const link = document.createElement("a");
        const url = URL.createObjectURL(blob);
        link.setAttribute("href", url);
        link.setAttribute("download", fileName);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        // Release the object URL to free up memory
        URL.revokeObjectURL(url);
    }

    function openInNewTab(url) {
        window.open(url, '_blank');
    }
</script>
@inherits CipherFormCard

@using Radzen

@using Data
@using CipherData.Models
@using CipherWeb.Shared.FormUtils.Rows
@using CipherWeb.Shared.Components
@using CipherWeb.Data

@inject ICipherInfo _db

@code {
    [Parameter]
    public Package pack { get; set; }

    string twiceColWidth = "100px";
    string colWidth = "50px";
    string halfColWidth = "25px";

    List<SubCategory> subCategories = new List<SubCategory>();
    List<Vessel> vessels = new List<Vessel>();

    protected override async Task OnInitializedAsync()
    {
        subCategories = await _db.GetSubCategories();
        vessels = await _db.GetVessels();
    }
}


<CipherFormCard>
    <CipherPackageId />

    @* -- MATERIAL -- *@
    <CipherFormRow Icon="@Icons.Material" Label="סוג החומר">
        <RadzenAutoComplete @bind-Value="pack.Material" Placeholder="בחרו סוג" Data="@TestedData.MaterialTypes"
                            Style="@Constants.textStyle"></RadzenAutoComplete>
    </CipherFormRow>

    @* -- SUB CATEGORY -- *@
    <CipherFormRow Icon="@Icons.Category" Label="קטגוריה" >
        <RadzenDropDownDataGrid @bind-Value=@pack.SubCategory Placeholder="חיפוש קטגוריה" SearchTextPlaceholder="חיפוש..."
                                Data=@subCategories TextProperty="Name" ValueProperty="Name"
                                AllowColumnResize="true" AllowFilteringByAllStringColumns="true" Style="@Constants.textStyle">
            <Columns>
                <RadzenDropDownDataGridColumn Property="Name" Title="משנית" Width="@twiceColWidth" />
                <RadzenDropDownDataGridColumn Property="MainCategory" Title="ראשית" Width="@twiceColWidth" />
                <RadzenDropDownDataGridColumn Property="Id" Title="מספר קטגוריה" Width="@colWidth" />
            </Columns>
        </RadzenDropDownDataGrid>
    </CipherFormRow>

    @* -- VESSEL -- *@
    <CipherFormRow Icon="@Icons.Vessel" Label="כלי">
        <RadzenDropDownDataGrid @bind-Value=@pack.Vessel Data=@vessels TextProperty="Name" ValueProperty="Name" Placeholder="חיפוש כלי" SearchTextPlaceholder="חיפוש..."
                                AllowColumnResize="true" AllowFilteringByAllStringColumns="true" Style="@Constants.textStyle">
            <Columns>
                <RadzenDropDownDataGridColumn Property="Name" Title="שם" Width="@colWidth" />
                <RadzenDropDownDataGridColumn Property="Id" Title="מספר" Width="@halfColWidth" />
            </Columns>
        </RadzenDropDownDataGrid>
    </CipherFormRow>
</CipherFormCard>